<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Donald Trump Twitter Analysis</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-1.1/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-1.1/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}

.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->






<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Data Science</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="about.html">About Me</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Donald Trump Twitter Analysis</h1>

</div>


<p>This where we an intro would go. Texty Text Text</p>
<div id="section-title" class="section level3">
<h3>Section Title</h3>
<p>TextTextTextTextTextTextTextText</p>
<pre><code>## # A tibble: 177,497 × 2
##           bigram     n
##            &lt;chr&gt; &lt;int&gt;
## 1         of the  1424
## 2      thank you  1396
## 3        will be  1333
## 4         in the  1116
## 5           is a   947
## 6   donald trump   897
## 7        a great   839
## 8        for the   711
## 9          to be   702
## 10 for president   691
## # ... with 177,487 more rows</code></pre>
<p>Text Text Text</p>
<pre class="r"><code>set.seed(2016)

a &lt;- grid::arrow(type = &quot;closed&quot;, length = unit(.15, &quot;inches&quot;))

ggraph(bigram_graph, layout = &quot;fr&quot;) +
  geom_edge_link(aes(edge_alpha = n), show.legend = FALSE,
                 arrow = a, end_cap = circle(.07, &#39;inches&#39;)) +
  geom_node_point(color = &quot;lightblue&quot;, size = 5) +
  geom_node_text(aes(label = name), vjust = 1, hjust = 1) +
  theme_void()</code></pre>
<p><img src="index_files/figure-html/2015-12-13_sentiment_graph-1.png" width="960" /> TEXT ABOUT GRAPH ABOVE</p>
</div>
<div id="section-title-1" class="section level3">
<h3>Section Title</h3>
<p>texttexttexttexttexttexttext</p>
<pre><code>## # A tibble: 6,699 × 3
##      item1     item2     n
##      &lt;chr&gt;     &lt;chr&gt; &lt;dbl&gt;
## 1  hillary     trump   239
## 2  hillary   clinton   184
## 3  hillary       amp   158
## 4  hillary   america   157
## 5  hillary    people   156
## 6  hillary president   120
## 7  hillary   crooked   114
## 8  hillary      time   102
## 9  hillary   country   101
## 10 hillary    donald    89
## # ... with 6,689 more rows</code></pre>
<pre><code>## # A tibble: 2,747,306 × 3
##          item1       item2 correlation
##          &lt;chr&gt;       &lt;chr&gt;       &lt;dbl&gt;
## 1      warming      global   0.9097812
## 2       global     warming   0.9097812
## 3       arabia       saudi   0.9039446
## 4        saudi      arabia   0.9039446
## 5  brotherhood      muslim   0.8733315
## 6       muslim brotherhood   0.8733315
## 7        lance   armstrong   0.7991911
## 8    armstrong       lance   0.7991911
## 9       rivers        joan   0.7839041
## 10        joan      rivers   0.7839041
## # ... with 2,747,296 more rows</code></pre>
<p>Religious groups</p>
<pre class="r"><code>word_cors %&gt;%
  filter(item1 %in% c(&quot;christian&quot;, &quot;jewish&quot;, &quot;muslim&quot;, &quot;athiest&quot;)) %&gt;%
  group_by(item1) %&gt;%
  top_n(10) %&gt;%
  ungroup() %&gt;%
  mutate(item2 = reorder(item2, correlation)) %&gt;%
  ggplot(aes(item2, correlation)) +
  geom_bar(stat = &quot;identity&quot;) +
  facet_wrap(~ item1, scales = &quot;free&quot;) +
  coord_flip()</code></pre>
<p><img src="index_files/figure-html/pairwise_correlation_graph-1.png" width="960" /></p>
<p>Politicians</p>
<pre class="r"><code>word_cors %&gt;%
  filter(item1 %in% c(&quot;hillary&quot;, &quot;jeb&quot;, &quot;ted&quot;, &quot;bernie&quot;)) %&gt;%
  group_by(item1) %&gt;%
  top_n(10) %&gt;%
  ungroup() %&gt;%
  mutate(item2 = reorder(item2, correlation)) %&gt;%
  ggplot(aes(item2, correlation)) +
  geom_bar(stat = &quot;identity&quot;) +
  facet_wrap(~ item1, scales = &quot;free&quot;) +
  coord_flip()</code></pre>
<p><img src="index_files/figure-html/pairwise_correlation_two_graph-1.png" width="960" /></p>
<p>Policies</p>
<pre class="r"><code>word_cors %&gt;%
  filter(item1 %in% c(&quot;healthcare&quot;, &quot;economy&quot;, &quot;immigration&quot;, &quot;globalization&quot;, &quot;terror&quot;)) %&gt;%
  group_by(item1) %&gt;%
  top_n(10) %&gt;%
  ungroup() %&gt;%
  mutate(item2 = reorder(item2, correlation)) %&gt;%
  ggplot(aes(item2, correlation)) +
  geom_bar(stat = &quot;identity&quot;) +
  facet_wrap(~ item1, scales = &quot;free&quot;) +
  coord_flip()</code></pre>
<p><img src="index_files/figure-html/pairwise_correlation_three_graph-1.png" width="960" /></p>
<p>set.seed(2016)</p>
<p>word_cors %&gt;% filter(correlation &gt; .15) %&gt;% graph_from_data_frame() %&gt;% ggraph(layout = “fr”) + geom_edge_link(aes(edge_alpha = correlation), show.legend = FALSE) + geom_node_point(color = “lightblue”, size = 5) + geom_node_text(aes(label = name), repel = TRUE) + theme_void()</p>
<div id="section" class="section level87">
<p></p>
</div>
<div id="section-1" class="section level87">
<p></p>
</div>
<div id="section-2" class="section level87">
<p></p>
</div>
<div id="sentiment-analysis" class="section level4">
<h4>SENTIMENT ANALYSIS</h4>
<div id="section-3" class="section level87">
<p></p>
</div>
<div id="section-4" class="section level87">
<p></p>
</div>
<div id="section-5" class="section level87">
<p></p>
<p>sentiments</p>
<p>get_sentiments(“nrc”)</p>
<p>mySentiment &lt;- get_nrc_sentiment(trump1$text) ####################################################################################### #### SENTIMENT ANALYSIS WITH INNER JOIN #######################################################################################</p>
<p>mySentiment &lt;- get_nrc_sentiment(trump1$text)</p>
<p>tweets &lt;- cbind(trump1, mySentiment)</p>
<p>sentimentTotals &lt;- data.frame(colSums(tweets[,c(7:16)])) names(sentimentTotals) &lt;- “count” sentimentTotals &lt;- cbind(“sentiment” = rownames(sentimentTotals), sentimentTotals) rownames(sentimentTotals) &lt;- NULL ggplot(data = sentimentTotals, aes(x = sentiment, y = count)) + geom_bar(aes(fill = sentiment), stat = “identity”) + theme(legend.position = “none”) + xlab(“Sentiment”) + ylab(“Total Count”) + ggtitle(“Total Sentiment Score for All Tweets”)</p>
</div>
</div>
<div id="section-6" class="section level4">
<h4></h4>
<p>tidy_books &lt;- trump1 %&gt;% group_by(year) %&gt;% mutate(linenumber = row_number(), chapter = cumsum(str_detect(text, regex(“^chapter [\divxlc]”, ignore_case = TRUE)))) %&gt;% ungroup() %&gt;% unnest_tokens(word, text)</p>
<p>nrcjoy &lt;- get_sentiments(“nrc”) %&gt;% filter(sentiment == “joy”)</p>
<p>tidy_books %&gt;% filter(year == “2017”) %&gt;% inner_join(nrcjoy) %&gt;% count(word, sort = TRUE)</p>
<p>trumpsentiment &lt;- tidy_books %&gt;% inner_join(get_sentiments(“nrc”)) %&gt;% count(year, index = linenumber %/% 1, sentiment) %&gt;% spread(sentiment, n, fill = 0) %&gt;% mutate(sentiment = positive - negative)</p>
<p>ggplot(trumpsentiment, aes(index, sentiment, fill = year)) + geom_col(show.legend = FALSE)</p>
<div id="section-7" class="section level87">
<p></p>
</div>
<div id="section-8" class="section level87">
<p></p>
</div>
<div id="section-9" class="section level87">
<p></p>
</div>
</div>
<div id="term-frequency" class="section level4">
<h4>TERM FREQUENCY</h4>
<div id="section-10" class="section level87">
<p></p>
</div>
<div id="section-11" class="section level87">
<p></p>
</div>
<div id="section-12" class="section level87">
<p></p>
<p>book_words &lt;- hate %&gt;% unnest_tokens(word, value) %&gt;% count(group_id, word, sort = TRUE) %&gt;% ungroup()</p>
<p>total_words &lt;- book_words %&gt;% group_by(group_id) %&gt;% summarize(total = sum(n))</p>
<p>book_words &lt;- left_join(book_words, total_words)</p>
<p>book_words</p>
<p>ggplot(book_words, aes(n/total, fill = group_id)) + geom_histogram(show.legend = FALSE) + xlim(NA, 0.0009) + facet_wrap(~group_id, ncol = 2, scales = “free_y”)</p>
</div>
<div id="section-13" class="section level87">
<p></p>
</div>
</div>
<div id="the-bind_tf_idf-function" class="section level4">
<h4>THE BIND_TF_IDF FUNCTION</h4>
<div id="section-14" class="section level87">
<p></p>
</div>
</div>
</div>
<div id="book_words---book_words" class="section level1">
<h1>book_words &lt;- book_words %&gt;%</h1>
</div>
<div id="bind_tf_idfword-group_id-n" class="section level1">
<h1>bind_tf_idf(word, group_id, n)</h1>
</div>
<div id="book_words" class="section level1">
<h1>book_words</h1>
</div>
<div id="book_words-1" class="section level1">
<h1>book_words %&gt;%</h1>
</div>
<div id="select-total" class="section level1">
<h1>select(-total) %&gt;%</h1>
</div>
<div id="arrangedesctf_idf" class="section level1">
<h1>arrange(desc(tf_idf))</h1>
</div>
<div id="plot_austen---book_words" class="section level1">
<h1>plot_austen &lt;- book_words %&gt;%</h1>
</div>
<div id="arrangedesctf_idf-1" class="section level1">
<h1>arrange(desc(tf_idf)) %&gt;%</h1>
</div>
<div id="mutateword-factorword-levels-revuniqueword" class="section level1">
<h1>mutate(word = factor(word, levels = rev(unique(word))))</h1>
</div>
<div id="plot_austen" class="section level1">
<h1>plot_austen %&gt;%</h1>
</div>
<div id="top_n20" class="section level1">
<h1>top_n(20) %&gt;%</h1>
</div>
<div id="ggplotaesword-tf_idf-fill-group_id" class="section level1">
<h1>ggplot(aes(word, tf_idf, fill = group_id)) +</h1>
</div>
<div id="geom_col" class="section level1">
<h1>geom_col() +</h1>
</div>
<div id="labsx-null-y-tf-idf" class="section level1">
<h1>labs(x = NULL, y = “tf-idf”) +</h1>
</div>
<div id="coord_flip" class="section level1">
<h1>coord_flip()</h1>
</div>
<div id="plot_austen-1" class="section level1">
<h1>plot_austen %&gt;%</h1>
</div>
<div id="group_bygroup_id" class="section level1">
<h1>group_by(group_id) %&gt;%</h1>
</div>
<div id="top_n15" class="section level1">
<h1>top_n(15) %&gt;%</h1>
</div>
<div id="ungroup" class="section level1">
<h1>ungroup %&gt;%</h1>
</div>
<div id="ggplotaesword-tf_idf-fill-group_id-1" class="section level1">
<h1>ggplot(aes(word, tf_idf, fill = group_id)) +</h1>
</div>
<div id="geom_colshow.legend-false" class="section level1">
<h1>geom_col(show.legend = FALSE) +</h1>
</div>
<div id="labsx-null-y-tf-idf-1" class="section level1">
<h1>labs(x = NULL, y = “tf-idf”) +</h1>
</div>
<div id="facet_wrapgroup_id-ncol-2-scales-free" class="section level1">
<h1>facet_wrap(~group_id, ncol = 2, scales = “free”) +</h1>
</div>
<div id="coord_flip-1" class="section level1">
<h1>coord_flip()</h1>
<div id="section-15" class="section level87">
<p></p>
</div>
<div id="section-16" class="section level87">
<p></p>
</div>
<div id="section-17" class="section level87">
<p></p>
</div>
<div id="topic-modeling" class="section level4">
<h4>TOPIC MODELING</h4>
<div id="section-18" class="section level87">
<p></p>
</div>
<div id="section-19" class="section level87">
<p></p>
</div>
<div id="section-20" class="section level87">
<p></p>
</div>
</div>
</div>
<div id="divide-into-documents-each-representing-one-chapter" class="section level1">
<h1>divide into documents, each representing one chapter</h1>
<p>by_chapter &lt;- hate %&gt;% group_by(group_id) %&gt;% mutate(chapter = cumsum(str_detect(value, regex(“^asdf”, ignore_case = TRUE)))) %&gt;% ungroup() %&gt;% filter(chapter &gt; 0) %&gt;% unite(document, group_id, chapter)</p>
</div>
<div id="split-into-words" class="section level1">
<h1>split into words</h1>
<p>by_chapter_word &lt;- by_chapter %&gt;% unnest_tokens(word, value)</p>
</div>
<div id="find-document-word-counts" class="section level1">
<h1>find document-word counts</h1>
<p>word_counts &lt;- by_chapter_word %&gt;% anti_join(stop_words) %&gt;% count(document, word, sort = TRUE) %&gt;% ungroup()</p>
<p>word_counts</p>
<div id="section-21" class="section level87">
<p></p>
</div>
<div id="lda-on-chapters" class="section level4">
<h4>LDA ON CHAPTERS</h4>
<div id="section-22" class="section level87">
<p></p>
<p>chapters_dtm &lt;- word_counts %&gt;% cast_dtm(document, word, n)</p>
<p>chapters_dtm</p>
<p>chapters_lda &lt;- LDA(chapters_dtm, k = 5, control = list(seed = 1234))</p>
<p>chapters_lda</p>
<p>chapter_topics &lt;- tidy(chapters_lda, matrix = “beta”)</p>
<p>chapter_topics</p>
<p>top_terms &lt;- chapter_topics %&gt;% group_by(topic) %&gt;% top_n(5, beta) %&gt;% ungroup() %&gt;% arrange(topic, -beta)</p>
<p>top_terms</p>
<p>top_terms %&gt;% mutate(term = reorder(term, beta)) %&gt;% ggplot(aes(term, beta, fill = factor(topic))) + geom_col(show.legend = FALSE) + facet_wrap(~ topic, scales = “free”) + coord_flip()</p>
</div>
<div id="section-23" class="section level87">
<p></p>
</div>
</div>
<div id="per-document-classification" class="section level4">
<h4>PER DOCUMENT CLASSIFICATION</h4>
<div id="section-24" class="section level87">
<p></p>
<p>chapters_gamma &lt;- tidy(chapters_lda, matrix = “gamma”)</p>
<p>chapters_gamma</p>
<p>chapters_gamma &lt;- chapters_gamma %&gt;% separate(document, c(“group_id”, “chapter”), sep = “_“, convert = TRUE)</p>
<p>chapters_gamma</p>
<p>chapters_gamma %&gt;% mutate(title = reorder(group_id, gamma * topic)) %&gt;% ggplot(aes(factor(topic), gamma)) + geom_boxplot() + facet_wrap(~ title)</p>
<p>chapter_classifications &lt;- chapters_gamma %&gt;% group_by(group_id, chapter) %&gt;% top_n(1, gamma) %&gt;% ungroup()</p>
<p>chapter_classifications</p>
<p>book_topics &lt;- chapter_classifications %&gt;% count(group_id, topic) %&gt;% group_by(group_id) %&gt;% top_n(1, n) %&gt;% ungroup() %&gt;% transmute(consensus = group_id, topic)</p>
<p>chapter_classifications %&gt;% inner_join(book_topics, by = “topic”) %&gt;% filter(group_id != consensus)</p>
</div>
<div id="section-25" class="section level87">
<p></p>
</div>
</div>
<div id="by-word-assignments-augment" class="section level4">
<h4>BY WORD ASSIGNMENTS: AUGMENT</h4>
<div id="section-26" class="section level87">
<p></p>
<p>assignments &lt;- augment(chapters_lda, data = chapters_dtm) assignments</p>
<p>assignments &lt;- assignments %&gt;% separate(document, c(“title”, “chapter”), sep = “_“, convert = TRUE) %&gt;% inner_join(book_topics, by = c(”.topic&quot; = “topic”))</p>
<p>assignments</p>
<p>assignments %&gt;% count(title, consensus, wt = count) %&gt;% group_by(title) %&gt;% mutate(percent = n / sum(n)) %&gt;% ggplot(aes(consensus, title, fill = percent)) + geom_tile() + scale_fill_gradient2(high = “red”) + theme_minimal() + theme(axis.text.x = element_text(angle = 90, hjust = 1), panel.grid = element_blank()) + labs(x = “Book words were assigned to”, y = “Book words came from”, fill = “% of assignments”)</p>
<p>wrong_words &lt;- assignments %&gt;% filter(title != consensus)</p>
<p>wrong_words</p>
<p>wrong_words %&gt;% count(title, consensus, term, wt = count) %&gt;% ungroup() %&gt;% arrange(desc(n)) ```</p>
</div>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
